' -*- mode: plantuml -*-
' vim:filetype=plantuml



@startuml
    skinparam monochrome true
    autonumber
    header ParES - Paralleler Mergesort
    participant Master


== Initialisierung ==
    activate Master

== Chunks verschicken ==

  loop Chunknum times
    Slave1 -> Master : bereit ()
    Slave2 -> Master : bereit ()
    Slave3 -> Master : bereit ()

    Master -> Slave1 : (chunk)
    Master -> Slave2 : (chunk) 
    Master -> Slave3 : (chunk) 
  end



group while moreThanTwoSlaves()

== END_TAG verschicken ==

    Slave1 -> Master : bereit ()
    Slave2 -> Master : bereit ()
    Slave3 -> Master : bereit ()

    Master -> Slave1 : END_TAG ()
    Master -> Slave2 : END_TAG () 
    Master -> Slave3 : END_TAG () 


== RunSizes empfangen ==
  
    Slave3 -> Master : (slaveResult.size)
    Slave2 -> Master : (slaveResult.size)
    Slave1 -> Master : (slaveResult.size)

== Inter-Slave-Merge ==

    Master -> Slave3 : DO_SEND_TAG (target: Slave2)
    Master -> Slave2 : DO_RECV_TAG (slaveResult.size)
    
    Slave3 -> Slave2 : (slaveResult.data)
    destroy Slave3

end

== Master-Merge ==

    Master -> Slave1 : DO_SEND_TAG (target: master)
    Master -> Slave2 : DO_SEND_TAG (target: master)
    
    Slave1 -> Master : (slaveResult.data)
    destroy Slave1

    Slave2 -> Master : (slaveResult.data)
    destroy Slave2



    deactivate Master

@enduml
